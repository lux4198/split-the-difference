generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model test {
  name String? @db.VarChar(30)

  @@ignore
}

model Group {
  id        Int       @id @default(autoincrement())
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  name      String    @db.VarChar(100)
  password String @db.VarChar(100)
  email String @db.VarChar(100)
  members   Member[]
  Expense   Expense[]
}

model Member {
  id      Int    @id @default(autoincrement())
  name    String @db.VarChar(100)
  groupId Int

  group    Group     @relation(fields: [groupId], references: [id], onDelete: Cascade)
  expenses Expense[] @relation("MemberExpenses")
}

model Expense {
  id      Int     @id @default(autoincrement())
  name    String? @db.VarChar(255)
  value   Float
  groupId Int
  group   Group   @relation(fields: [groupId], references: [id], onDelete: Cascade)

  members Member[] @relation("MemberExpenses")
}
